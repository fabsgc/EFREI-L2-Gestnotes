<?php
$session = array();
$session['avatar'] = '/public/img/user.png';
$session['email'] = 'willima.stow@efrei.net';
$session['firstname'] = 'William';
$session['id'] = 'admin1';
$session['logged'] = '1';
$session['name'] = 'Stow';
$session['role'] = 'ADMIN';
$session['token'] = '703a4502e589c4c25b96d9f20c31f76f9e978606';
$cookie = array();
$cookie['sessionid'] = '49KIWl8z1DRxb80FPTDb6rOw42FsHiaWfDqZFrtuwVSLpvHhe7sj09KaRaAYIB37';
$get = array();
$get['id'] = '4';
$get['token'] = '703a4502e589c4c25b96d9f20c31f76f9e978606';
$post = array();
$define = array();
$define['form-crsf'] = 'une erreur est survenue pendant la validation du formulaire';
$define['promotion-year'] = '2013';
$define['user-admin'] = 'ADMIN';
$define['user-student'] = 'STUDENT';
$define['user-teacher'] = 'TEACHER';
$request = array();
$request['action'] = 'editGroup';
$request['controller'] = 'adminGroup';
$request['logged'] = '1';
$request['name'] = 'admin-group-edit';
$request['url'] = '/admin/group/edit/([0-9]+)/(.*)(/*)';
$title = 'Éditer un groupe';
$filAriane = 'Groupe/Éditer un groupe/Groupe B';
$group = array(); 
$group['id'] = 4;
$group['name'] = 'Groupe B';
$group['students'] = array(); 
$group['students']['0'] = array(); 
$group['students']['0']['id'] = '20130089';
$group['students']['0']['password'] = '61b115da227a57859490c53251490fffe66c6d67';
$group['students']['0']['sucessYear'] = false;
$group['students']['0']['group'] = 4;
$group['students']['0']['personDetail'] = array(); 
$group['students']['0']['personDetail']['id'] = 1;
$group['students']['0']['personDetail']['name'] = 'Beaujean';
$group['students']['0']['personDetail']['firstName'] = 'Fabien';
$group['students']['0']['personDetail']['address'] = '1 allée des mûriers';
$group['students']['0']['personDetail']['city'] = 'Verrières-le-Buisson';
$group['students']['0']['personDetail']['postalCode'] = '91370';
$group['students']['0']['personDetail']['country'] = 'France';
$group['students']['0']['personDetail']['email'] = 'fabien.beaujean@efrei.net';
$group['students']['0']['personDetail']['avatar'] = '/public/img/avatar.png';
$group['students']['0']['personDetail']['phoneHome'] = '0169307310';
$group['students']['0']['personDetail']['phoneMobile'] = '0786027310';
$group['students']['0']['personDetail']['dateBorn'] = '20/07/1995';
$group['students']['0']['personDetail']['dateRegister'] = '';
$group['students']['0']['personDetail']['gender'] = 0;
$group['students']['0']['contact'] = array(); 
$group['students']['0']['contact']['id'] = '1';
$group['students']['0']['contact']['personDetail'] = array(); 
$group['students']['0']['contact']['personDetail']['id'] = 3;
$group['students']['0']['contact']['personDetail']['name'] = 'Beaujean';
$group['students']['0']['contact']['personDetail']['firstName'] = 'Franck';
$group['students']['0']['contact']['personDetail']['address'] = '1 allée des mûriers';
$group['students']['0']['contact']['personDetail']['city'] = 'Verrières-le-Buisson';
$group['students']['0']['contact']['personDetail']['postalCode'] = '91370';
$group['students']['0']['contact']['personDetail']['country'] = 'France';
$group['students']['0']['contact']['personDetail']['email'] = 'franck.beaujean@yahoo.fr';
$group['students']['0']['contact']['personDetail']['avatar'] = '/public/img/user.png';
$group['students']['0']['contact']['personDetail']['phoneHome'] = '';
$group['students']['0']['contact']['personDetail']['phoneMobile'] = '';
$group['students']['0']['contact']['personDetail']['dateBorn'] = '';
$group['students']['0']['contact']['personDetail']['dateRegister'] = '';
$group['students']['0']['contact']['personDetail']['gender'] = 0;
$group['students']['0']['teacher'] = array(); 
$group['students']['0']['teacher']['id'] = 'teacher1';
$group['students']['0']['teacher']['password'] = '61b115da227a57859490c53251490fffe66c6d67';
$group['students']['0']['teacher']['personDetail'] = array(); 
$group['students']['0']['teacher']['personDetail']['id'] = 2;
$group['students']['0']['teacher']['personDetail']['name'] = 'Lepoivre';
$group['students']['0']['teacher']['personDetail']['firstName'] = 'Franck';
$group['students']['0']['teacher']['personDetail']['address'] = '1 allée des mûriers';
$group['students']['0']['teacher']['personDetail']['city'] = 'paris';
$group['students']['0']['teacher']['personDetail']['postalCode'] = '75008';
$group['students']['0']['teacher']['personDetail']['country'] = 'France';
$group['students']['0']['teacher']['personDetail']['email'] = 'franck.lepoivre@gmail.com';
$group['students']['0']['teacher']['personDetail']['avatar'] = '/public/img/user.png';
$group['students']['0']['teacher']['personDetail']['phoneHome'] = '0189567854';
$group['students']['0']['teacher']['personDetail']['phoneMobile'] = '0645732409';
$group['students']['0']['teacher']['personDetail']['dateBorn'] = '20/09/1965';
$group['students']['0']['teacher']['personDetail']['dateRegister'] = '';
$group['students']['0']['teacher']['personDetail']['gender'] = 0;
$studentsThisGroup = array(); 
$studentsThisGroup['0'] = '20130089';
$studentsNotInGroupAndThisGroup = array(); 
$studentsNotInGroupAndThisGroup['0'] = array(); 
$studentsNotInGroupAndThisGroup['0']['id'] = '20130089';
$studentsNotInGroupAndThisGroup['0']['password'] = '61b115da227a57859490c53251490fffe66c6d67';
$studentsNotInGroupAndThisGroup['0']['sucessYear'] = false;
$studentsNotInGroupAndThisGroup['0']['group'] = 4;
$studentsNotInGroupAndThisGroup['0']['personDetail'] = array(); 
$studentsNotInGroupAndThisGroup['0']['personDetail']['id'] = 1;
$studentsNotInGroupAndThisGroup['0']['personDetail']['name'] = 'Beaujean';
$studentsNotInGroupAndThisGroup['0']['personDetail']['firstName'] = 'Fabien';
$studentsNotInGroupAndThisGroup['0']['personDetail']['address'] = '1 allée des mûriers';
$studentsNotInGroupAndThisGroup['0']['personDetail']['city'] = 'Verrières-le-Buisson';
$studentsNotInGroupAndThisGroup['0']['personDetail']['postalCode'] = '91370';
$studentsNotInGroupAndThisGroup['0']['personDetail']['country'] = 'France';
$studentsNotInGroupAndThisGroup['0']['personDetail']['email'] = 'fabien.beaujean@efrei.net';
$studentsNotInGroupAndThisGroup['0']['personDetail']['avatar'] = '/public/img/avatar.png';
$studentsNotInGroupAndThisGroup['0']['personDetail']['phoneHome'] = '0169307310';
$studentsNotInGroupAndThisGroup['0']['personDetail']['phoneMobile'] = '0786027310';
$studentsNotInGroupAndThisGroup['0']['personDetail']['dateBorn'] = '20/07/1995';
$studentsNotInGroupAndThisGroup['0']['personDetail']['dateRegister'] = '';
$studentsNotInGroupAndThisGroup['0']['personDetail']['gender'] = 0;
$studentsNotInGroupAndThisGroup['0']['contact'] = array(); 
$studentsNotInGroupAndThisGroup['0']['contact']['id'] = '1';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail'] = array(); 
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['id'] = 3;
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['name'] = 'Beaujean';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['firstName'] = 'Franck';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['address'] = '1 allée des mûriers';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['city'] = 'Verrières-le-Buisson';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['postalCode'] = '91370';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['country'] = 'France';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['email'] = 'franck.beaujean@yahoo.fr';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['avatar'] = '/public/img/user.png';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['phoneHome'] = '';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['phoneMobile'] = '';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['dateBorn'] = '';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['dateRegister'] = '';
$studentsNotInGroupAndThisGroup['0']['contact']['personDetail']['gender'] = 0;
$studentsNotInGroupAndThisGroup['0']['teacher'] = array(); 
$studentsNotInGroupAndThisGroup['0']['teacher']['id'] = 'teacher1';
$studentsNotInGroupAndThisGroup['0']['teacher']['password'] = '61b115da227a57859490c53251490fffe66c6d67';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail'] = array(); 
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['id'] = 2;
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['name'] = 'Lepoivre';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['firstName'] = 'Franck';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['address'] = '1 allée des mûriers';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['city'] = 'paris';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['postalCode'] = '75008';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['country'] = 'France';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['email'] = 'franck.lepoivre@gmail.com';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['avatar'] = '/public/img/user.png';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['phoneHome'] = '0189567854';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['phoneMobile'] = '0645732409';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['dateBorn'] = '20/09/1965';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['dateRegister'] = '';
$studentsNotInGroupAndThisGroup['0']['teacher']['personDetail']['gender'] = 0;
?><?php
?><!DOCTYPE html>
<html style="opacity:0;">
	<head>
		<meta charset="utf-8" />
		<title><?php echo $title; ?> - GestNotes</title>
		<link rel="icon" type="image/png" href="/public/img/icon.png" />
		<link href="/public/css/default.css" rel="stylesheet" media="screen" type="text/css" /> 
		<link href="/public/file/font-awesome/css/font-awesome.min.css" rel="stylesheet" media="screen" type="text/css" />
		<script type="text/javascript" src="/public/js/jquery-1.11.2.min.js"></script>
		<script type="text/javascript" src="/public/js/default.js"></script>
	</head>
	<body id="body">
		<header class="default">
			<div id="header-left">
				<i class="fa fa-book"></i> GestNotes
			</div>
			<div id="header-right">
				<div class="right-account">
					<div id="logout" class="account-logout">
						<i class="fa fa-sign-out"></i>
					</div>
					<div class="account-profile">
						<div class="profile-username">
							<?php echo $session['firstname']; ?> - <?php echo $session['name']; ?>
						</div>
						<div class="profile-avatar">
							<img src="<?php echo $session['avatar']; ?>"/>
						</div>
					</div>
				</div>
			</div>
			<div class="clear"/>
		</header>
		<div id="side-menu">
			<ul>
				<li <?php if($request['controller'] == 'index'){ ?>class="active"<?php } ?>>
					<a href="/">
						<i class="fa fa-home"></i>
						<span class="title">Accueil</class>
					</a>
				</li>
				<li <?php if($request['controller'] == 'user'){ ?>class="active"<?php } ?>>
					<a href="/user">
						<i class="fa fa-user"></i>
						<span class="title">Profil</class>
					</a>
				</li>
				<?php if($session['role'] == $define['user-student']){ ?>
					<li <?php if($request['controller'] == 'studentMark'){ ?>class="active"<?php } ?>>
						<a href="/student/mark">
							<i class="fa fa-university"></i>
							<span class="title">Notes</class>
						</a>
					</li>
					<li <?php if($request['controller'] == 'studentCourse'){ ?>class="active"<?php } ?>>
						<a href="/student/course">
							<i class="fa fa-folder-open"></i>
							<span class="title">Cours</class>
						</a>
					</li>
				<?php } ?>
				<?php if($session['role'] == $define['user-teacher']){ ?>
					<li <?php if($request['controller'] == 'teacherMark'){ ?>class="active"<?php } ?>>
						<a href="/teacher/mark">
							<i class="fa fa-university"></i>
							<span class="title">Notes</class>
						</a>
					</li>
					<li <?php if($request['controller'] == 'teacherCourse'){ ?>class="active"<?php } ?>>
						<a href="/teacher/course">
							<i class="fa fa-folder-open"></i>
							<span class="title">Cours</class>
						</a>
					</li>
					<li <?php if($request['controller'] == 'teacherStudent'){ ?>class="active"<?php } ?>>
						<a href="/teacher/student">
							<i class="fa fa-users"></i>
							<span class="title">Élèves</class>
						</a>
					</li>
				<?php } ?>
				<?php if($session['role'] == $define['user-admin']){ ?>
					<li <?php if($request['controller'] == 'adminStudent'){ ?>class="active"<?php } ?>>
						<a href="/admin/student">
							<i class="fa fa-user-plus"></i>
							<span class="title">Élèves</class>
						</a>
					</li>
					<li <?php if($request['controller'] == 'adminTeacher'){ ?>class="active"<?php } ?>>
						<a href="/admin/teacher">
							<i class="fa fa-binoculars"></i>
							<span class="title">Professeurs</class>
						</a>
					</li>
					<li <?php if($request['controller'] == 'adminGroup'){ ?>class="active"<?php } ?>>
						<a href="/admin/group">
							<i class="fa fa-users"></i>
							<span class="title">Groupes</class>
						</a>
					</li>
					<li <?php if($request['controller'] == 'adminCourse'){ ?>class="active"<?php } ?>>
						<a href="/admin/course">
							<i class="fa fa-folder-open"></i>
							<span class="title">Cours</class>
						</a>
					</li>
					<li <?php if($request['controller'] == 'adminMark'){ ?>class="active"<?php } ?>>
						<a href="/admin/mark">
							<i class="fa fa-university"></i>
							<span class="title">Notes</class>
						</a>
					</li>
				<?php } ?>
			</ul>
		</div>
		<div id="main">
			<?php if($request['controller'] != 'index'){ ?>
				<h2><?php echo $title; ?></h2>
			<?php } ?>
			<div id="fil-ariane">
				<ul>
					<?php
						if(isset($filAriane))
						{
							$filAriane = explode('/', 'Accueil/'.$filAriane);
						}
						else
						{
							$filAriane = array('Accueil');
						}
					?>
					<?php foreach($filAriane as $key => $value){ ?>
						<li>
							<?php echo $value; ?>
						</li>
						<?php if(count($filAriane) > 1 && $key < count($filAriane)-1){ ?>
							<span class="fa fa-chevron-right">&#160;</span>
						<?php } ?>
					<?php } ?>
				</ul>
			</div>
			<?php
?><?php if(isset($formErrors) && count($formErrors) > 0){ ?>
	<div class="alert alert-error">
		<?php foreach($formErrors as $key => $errors){ ?>
			<?php foreach($errors as $key2 => $error){ ?>
				<?php echo $error; ?>
				<?php if(count($errors) > $key2 + 1){ ?>
					<br />
				<?php } ?>
			<?php } ?>
			<?php if(count($formErrors) > $key + 1){ ?>
				<br />
			<?php } ?>
		<?php } ?>
	</div>	
<?php } ?>
<?php if(isset($session['flash_success'])){ ?>
	<div class="alert alert-success">
		<div class="close" onclick="closeFlashMessage(this);"><span class="fa fa-times">&nbsp;</span> </div>
		<?php echo $session['flash_success']; ?>
	</div>
<?php } ?>



			


<?php
	$name = (isset($post["name"])) ? $post["name"] : $group['name'];
	$student = (isset($post["student"])) ? $post["student"] : implode("-", $studentsThisGroup);
	$students = explode("-", $student);
?>

<form method="post" action="">
	<label>Nom</label><input type="text" name="name" value="<?php echo $name; ?>"/><br />
	<label style="vertical-align:top">Elèves du groupe</label>
	<select name="student" multiple style="min-height: 150px;">
		<?php foreach($studentsNotInGroupAndThisGroup as $data){ ?>
			<?php if(!in_array($data['id'], $students)){ ?>
				<option value="<?php echo $data['id']; ?>"><?php echo $data['personDetail']['firstName']; ?> <?php echo $data['personDetail']['name']; ?></option>
			<?php } else { ?>
				<option value="<?php echo $data['id']; ?>" selected><?php echo $data['personDetail']['firstName']; ?> <?php echo $data['personDetail']['name']; ?></option>
			<?php } ?>
		<?php } ?>
	</select><br />
	<input type="hidden" name="token" value="<?php echo $session['token']; ?>" />
	<input type="submit" value="Enregistrer" />
</form>

<?php
?>		</div>
		<footer></footer>	
	</body>
</html>

